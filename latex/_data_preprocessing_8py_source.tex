\doxysection{Data\+Preprocessing.\+py}
\hypertarget{_data_preprocessing_8py_source}{}\label{_data_preprocessing_8py_source}\index{src/DataPreprocessing.py@{src/DataPreprocessing.py}}
\mbox{\hyperlink{_data_preprocessing_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00001}\mbox{\hyperlink{namespacesrc}{00001}}\ \textcolor{stringliteral}{'''@package\ DataPreprocessing}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00002}00002\ \textcolor{stringliteral}{This\ module\ contains\ the\ Stock\ class\ that\ processes\ the\ data\ and\ creates\ the\ output\ files\ for\ each\ stock.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00003}00003\ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00004}00004\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00005}00005\ \textcolor{keyword}{import}\ warnings}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00006}00006\ \textcolor{keyword}{import}\ pandas\ \textcolor{keyword}{as}\ pd}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00007}00007\ \textcolor{keyword}{import}\ numpy\ \textcolor{keyword}{as}\ np}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00008}00008\ \textcolor{keyword}{import}\ os}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00009}00009\ \textcolor{keyword}{import}\ argparse}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00010}00010\ \textcolor{keyword}{from}\ numpy.lib.stride\_tricks\ \textcolor{keyword}{import}\ sliding\_window\_view}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00011}00011\ \textcolor{keyword}{from}\ config.config\ \textcolor{keyword}{import}\ get\_configuration}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00012}00012\ \textcolor{keyword}{from}\ utils\_vv\_tfg\ \textcolor{keyword}{import}\ save\_data}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00013}00013\ warnings.filterwarnings(\textcolor{stringliteral}{'ignore'})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00014}00014\ warnings.simplefilter(\textcolor{stringliteral}{'ignore'})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00016}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock}{00016}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock}{Stock}}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00017}00017\ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00018}00018\ \textcolor{stringliteral}{\ \ \ \ Class\ that\ creates\ the\ Stock,\ processes\ the\ stock\ data,\ and\ creates\ the\ output\ files\ for\ each\ stock.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00019}00019\ \textcolor{stringliteral}{\ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00020}00020\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00021}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae00121031f70a03e24a80afa60c8fae6}{00021}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae00121031f70a03e24a80afa60c8fae6}{\_\_init\_\_}}(self,\ ticker:\ str,\ file\_name:\ str,\ lahead:\ list,\ tr\_tst:\ float,\ scen\_name:\ str):}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00022}00022\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00023}00023\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Constructs\ all\ the\ necessary\ attributes\ for\ the\ Stock\ object.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00024}00024\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00025}00025\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00026}00026\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00027}00027\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ ticker\ :\ str}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00028}00028\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ stock\ ticker.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00029}00029\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ file\_name\ :\ str}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00030}00030\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ Path\ to\ the\ data\ file.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00031}00031\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ lahead\ :\ list}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00032}00032\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ List\ of\ the\ number\ of\ days\ ahead.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00033}00033\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ tr\_tst\ :\ float}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00034}00034\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ Train-\/test\ ratio.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00035}00035\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ scen\_name\ :\ str}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00036}00036\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ Scenario\ name.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00037}00037\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00038}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a75be40f2df1f9b4d57c5e79898540bff}{00038}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a75be40f2df1f9b4d57c5e79898540bff}{ticker}}\ =\ ticker}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00039}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ab7ddd922917cec078b006bfcce204444}{00039}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ab7ddd922917cec078b006bfcce204444}{\_data}}\ =\ pd.DataFrame(self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae2a5a9d1b140a88d738236ffd551431d}{\_read\_data}}(file\_name))}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00040}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a5058a601b0c725f1caa4c092e6b52c88}{00040}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a5058a601b0c725f1caa4c092e6b52c88}{\_lahead}}\ =\ lahead}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00041}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_af2820257a0a2cf7eb135582b447c9d27}{00041}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_af2820257a0a2cf7eb135582b447c9d27}{tr\_tst}}\ =\ tr\_tst}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00042}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{00042}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}\ =\ pd.DataFrame(self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae2a5a9d1b140a88d738236ffd551431d}{\_read\_data}}(file\_name))}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00043}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a94d30e8ab6d6aac2d0258a130bc1f926}{00043}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a94d30e8ab6d6aac2d0258a130bc1f926}{scen\_name}}\ =\ scen\_name}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00044}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_aed90980f94a16f3ed881d5c3e6671330}{00044}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_aed90980f94a16f3ed881d5c3e6671330}{serial\_dict}}\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00045}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a3f376b1a40277303ee4984e339d4076c}{00045}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a3f376b1a40277303ee4984e339d4076c}{mserial\_dict}}\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00046}00046\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_aed90980f94a16f3ed881d5c3e6671330}{serial\_dict}}[\textcolor{stringliteral}{'INPUT\_DATA'}]\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00047}00047\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a3f376b1a40277303ee4984e339d4076c}{mserial\_dict}}[\textcolor{stringliteral}{'INPUT\_DATA'}]\ =\ \{\}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00048}00048\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00049}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae2a5a9d1b140a88d738236ffd551431d}{00049}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae2a5a9d1b140a88d738236ffd551431d}{\_read\_data}}(self,\ file\_name:\ str)\ -\/>\ pd.DataFrame:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00050}00050\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00051}00051\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns\ the\ data\ from\ the\ data\ path.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00052}00052\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00053}00053\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00054}00054\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00055}00055\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ file\_name\ :\ str}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00056}00056\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ Path\ to\ the\ data.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00057}00057\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00058}00058\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00059}00059\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00060}00060\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ pd.DataFrame}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00061}00061\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ stock\ data.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00062}00062\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00063}00063\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pd.read\_csv(file\_name,\ sep=\textcolor{stringliteral}{"{},"{}},\ index\_col=0,\ parse\_dates=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00064}00064\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00065}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a8a87bfec753d6205d983eadc56975b12}{00065}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a8a87bfec753d6205d983eadc56975b12}{process\_univariate\_data}}(self,\ win:\ int)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00066}00066\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00067}00067\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Processes\ the\ univariate\ data.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00068}00068\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00069}00069\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00070}00070\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00071}00071\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ win\ :\ int}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00072}00072\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ Window\ size.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00073}00073\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00074}00074\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ ahead\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a5058a601b0c725f1caa4c092e6b52c88}{\_lahead}}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00075}00075\ \ \ \ \ \ \ \ \ \ \ \ \ df\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00076}00076\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00077}00077\ \ \ \ \ \ \ \ \ \ \ \ \ win\_x\ =\ sliding\_window\_view(df[\textcolor{stringliteral}{'PX\_LAST'}].to\_numpy(),\ window\_shape=win)[::1]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00078}00078\ \ \ \ \ \ \ \ \ \ \ \ \ Y\ =\ df.iloc[ahead\ +\ win:][\textcolor{stringliteral}{'PX\_LAST'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00079}00079\ \ \ \ \ \ \ \ \ \ \ \ \ X\ =\ pd.DataFrame.from\_records(win\_x)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00080}00080\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ X\ =\ X.iloc[:-\/(ahead\ +\ 1),\ :]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ X.set\_index(df.index[(win\ -\/\ 1):-\/(ahead\ +\ 1)],\ drop=\textcolor{keyword}{True},\ inplace=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00084}00084\ \ \ \ \ \ \ \ \ \ \ \ \ x\_mean\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0d114f6856b9ebafab0609a38c12fd78}{calculate\_mean}}(X,\ axis=1)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00085}00085\ \ \ \ \ \ \ \ \ \ \ \ \ center\_x\ =\ X.sub(x\_mean,\ axis=0)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00086}00086\ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00087}00087\ \ \ \ \ \ \ \ \ \ \ \ \ min\_x\ =\ min(self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ab731a2338fa9f2499d25d17259f77cea}{calculate\_min}}(center\_x))}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00088}00088\ \ \ \ \ \ \ \ \ \ \ \ \ max\_x\ =\ max(self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ad08c5cea0cbe7dda017033cd2309af3b}{calculate\_max}}(center\_x))}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00089}00089\ \ \ \ \ \ \ \ \ \ \ \ \ vdd\ =\ pd.DataFrame(\{\textcolor{stringliteral}{'mean'}:\ x\_mean,\ \textcolor{stringliteral}{'min'}:\ min\_x,\ \textcolor{stringliteral}{'max'}:\ max\_x\})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00090}00090\ \ \ \ \ \ \ \ \ \ \ \ \ vdd.set\_index(X.index)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00092}00092\ \ \ \ \ \ \ \ \ \ \ \ \ center\_x\_norm\ =\ center\_x.apply(\textcolor{keyword}{lambda}\ x:\ (x\ -\/\ min\_x)\ /\ (max\_x\ -\/\ min\_x),\ axis=1)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00093}00093\ \ \ \ \ \ \ \ \ \ \ \ \ center\_y\_norm\ =\ pd.Series([((i\ -\/\ j)\ -\/\ min\_x)\ /\ (max\_x\ -\/\ min\_x)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00094}00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i,\ j\ \textcolor{keywordflow}{in}\ zip(Y.tolist(),\ x\_mean.tolist())],\ index=Y.index)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00095}00095\ \ \ \ \ \ \ \ \ \ \ \ \ center\_x\_norm\ =\ center\_x\_norm.astype(\textcolor{stringliteral}{'float32'})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00096}00096\ \ \ \ \ \ \ \ \ \ \ \ \ center\_y\_norm\ =\ center\_y\_norm.astype(\textcolor{stringliteral}{'float32'})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00098}00098\ \ \ \ \ \ \ \ \ \ \ \ \ pmod\ =\ int(center\_x\_norm.shape[0]\ *\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_af2820257a0a2cf7eb135582b447c9d27}{tr\_tst}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00099}00099\ \ \ \ \ \ \ \ \ \ \ \ \ train\_x\ =\ center\_x\_norm.iloc[:pmod,\ :]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00100}00100\ \ \ \ \ \ \ \ \ \ \ \ \ train\_y\ =\ center\_y\_norm.iloc[:pmod]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00101}00101\ \ \ \ \ \ \ \ \ \ \ \ \ test\_x\ =\ center\_x\_norm.iloc[pmod:,\ :]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00102}00102\ \ \ \ \ \ \ \ \ \ \ \ \ test\_y\ =\ center\_y\_norm.iloc[pmod:]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00103}00103\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_aed90980f94a16f3ed881d5c3e6671330}{serial\_dict}}[\textcolor{stringliteral}{'INPUT\_DATA'}][ahead]\ =\ \{}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00104}00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}x"{}}:\ X,\ \textcolor{stringliteral}{"{}y"{}}:\ Y,\ \textcolor{stringliteral}{"{}nx"{}}:\ center\_x\_norm,}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00105}00105\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}ny"{}}:\ center\_y\_norm,\ \textcolor{stringliteral}{"{}numt"{}}:\ pmod,}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00106}00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}trainX"{}}:\ train\_x,\ \textcolor{stringliteral}{"{}trainY"{}}:\ train\_y,}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00107}00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}testX"{}}:\ test\_x,\ \textcolor{stringliteral}{"{}testY"{}}:\ test\_y,\ \textcolor{stringliteral}{"{}vdd"{}}:\ vdd}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00108}00108\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00109}00109\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00110}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_acb4c9dd7e676164d3520c2bdd70098fa}{00110}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_acb4c9dd7e676164d3520c2bdd70098fa}{process\_multivariate\_data}}(self,\ mwin:\ int,\ m\_ftrs:\ int)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00111}00111\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00112}00112\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Processes\ the\ multivariate\ data.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00113}00113\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00114}00114\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00115}00115\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00116}00116\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ mwin\ :\ int}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00117}00117\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ Multivariate\ window\ size.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00118}00118\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ m\_ftrs\ :\ int}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00119}00119\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ Multivariate\ number\ of\ features.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00120}00120\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00121}00121\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_aca93b9261771a54298d5fbe82434e621}{check\_infinite\_values}}(self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00122}00122\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00123}00123\ \ \ \ \ \ \ \ \ df\_y\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{"{}PX\_LAST"{}}].copy()}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00124}00124\ \ \ \ \ \ \ \ \ df\_x\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[[\textcolor{stringliteral}{"{}PX\_LAST"{}},\ \textcolor{stringliteral}{"{}PX\_OPEN"{}},\ \textcolor{stringliteral}{"{}RSI\_14D"{}},\ \textcolor{stringliteral}{"{}PX\_TREND"{}},\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00125}00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}PX\_VTREND"{}},\ \textcolor{stringliteral}{"{}TWEET\_POSTIVIE"{}},\ \textcolor{stringliteral}{"{}TWEET\_NEGATIVE"{}},}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00126}00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}NEWS\_POSITIVE"{}},\ \textcolor{stringliteral}{"{}NEWS\_NEGATIVE"{}},\ \textcolor{stringliteral}{"{}VOLATILITY"{}}]].copy()}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00127}00127\ \ \ \ \ \ \ \ \ idx\ =\ df\_x.index[(mwin\ -\/\ 1):]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00128}00128\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00129}00129\ \ \ \ \ \ \ \ \ multi\_x,\ cols\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae34d126cbc15a9f5e6c7f4d4ef8dd7a3}{prepare\_multivariate\_data}}(df\_x,\ mwin,\ m\_ftrs,\ idx)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00130}00130\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00131}00131\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ ahead\ \textcolor{keywordflow}{in}\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a5058a601b0c725f1caa4c092e6b52c88}{\_lahead}}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00132}00132\ \ \ \ \ \ \ \ \ \ \ \ \ multi\_x\_list\ =\ multi\_x[:-\/(ahead\ +\ 1),\ :,\ :]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ multi\_y\_list\ =\ df\_y.iloc[ahead\ +\ mwin:]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ mean\_multi\_x\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0d114f6856b9ebafab0609a38c12fd78}{calculate\_mean}}(multi\_x\_list,\ axis=1)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00135}00135\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00136}00136\ \ \ \ \ \ \ \ \ \ \ \ \ mean\_multi\_x\_c\ =\ multi\_x\_list\ -\/\ mean\_multi\_x[:,\ \textcolor{keywordtype}{None},\ :]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \ \ \ pavX\ =\ pd.DataFrame(mean\_multi\_x,\ columns=df\_x.columns)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00138}00138\ \ \ \ \ \ \ \ \ \ \ \ \ pavX.set\_index(df\_x.index[(mwin\ -\/\ 1):-\/(ahead\ +\ 1)],\ drop=\textcolor{keyword}{True},\ inplace=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00139}00139\ \ \ \ \ \ \ \ \ \ \ \ \ max\_mult\_x\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ad08c5cea0cbe7dda017033cd2309af3b}{calculate\_max}}(mean\_multi\_x\_c,\ axis=(0,\ 1))}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00140}00140\ \ \ \ \ \ \ \ \ \ \ \ \ min\_mult\_x\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ab731a2338fa9f2499d25d17259f77cea}{calculate\_min}}(mean\_multi\_x\_c,\ axis=(0,\ 1))}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00141}00141\ \ \ \ \ \ \ \ \ \ \ \ \ mvdd\ =\ \{\textcolor{stringliteral}{"{}mean"{}}:\ pavX,\ \textcolor{stringliteral}{"{}min"{}}:\ min\_mult\_x,\ \textcolor{stringliteral}{"{}max"{}}:\ max\_mult\_x\}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00142}00142\ \ \ \ \ \ \ \ \ \ \ \ \ multi\_x\_norm\ =\ (mean\_multi\_x\_c\ -\/\ min\_mult\_x[\textcolor{keywordtype}{None},\ \textcolor{keywordtype}{None},\ :])\ /\ (max\_mult\_x[\textcolor{keywordtype}{None},\ \textcolor{keywordtype}{None},\ :]\ -\/\ min\_mult\_x[\textcolor{keywordtype}{None},\ \textcolor{keywordtype}{None},\ :]\ +\ 0.00001)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00143}00143\ \ \ \ \ \ \ \ \ \ \ \ \ multi\_y\_norm\ =\ ((multi\_y\_list.to\_numpy()\ -\/\ mean\_multi\_x[:,\ 0])\ -\/\ min\_mult\_x[0])\ /\ (max\_mult\_x[0]\ -\/\ min\_mult\_x[0]\ +\ 0.00001)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00144}00144\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00145}00145\ \ \ \ \ \ \ \ \ \ \ \ \ multi\_x\_norm\ =\ multi\_x\_norm.astype(\textcolor{stringliteral}{"{}float32"{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00146}00146\ \ \ \ \ \ \ \ \ \ \ \ \ multi\_y\_norm\ =\ multi\_y\_norm.astype(\textcolor{stringliteral}{"{}float32"{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00147}00147\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ multi\_train\_x,\ multi\_train\_y,\ multi\_test\_x,\ multi\_test\_y,\ pmod\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a193b5b7257b2826ee06e1d39b961a995}{prepare\_data\_for\_modeling}}(multi\_x\_norm,\ multi\_y\_norm,\ multi=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00149}00149\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00150}00150\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_afaadb71ab1b0a8dc3f092e3725fe5653}{check\_nan\_values}}(multi\_train\_x,\ multi\_test\_x,\ ahead)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00151}00151\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00152}00152\ \ \ \ \ \ \ \ \ \ \ \ \ xdx\ =\ idx[:-\/(ahead\ +\ 1)]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00153}00153\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a3f376b1a40277303ee4984e339d4076c}{mserial\_dict}}[\textcolor{stringliteral}{'INPUT\_DATA'}][ahead]\ =\ \{\textcolor{stringliteral}{"{}x"{}}:\ multi\_x\_list,\ \textcolor{stringliteral}{"{}y"{}}:\ multi\_y\_list,\ \textcolor{stringliteral}{"{}nx"{}}:\ multi\_x\_norm,\ \textcolor{stringliteral}{"{}ny"{}}:\ multi\_y\_norm,\ \textcolor{stringliteral}{"{}numt"{}}:\ pmod,}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00154}00154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}trainX"{}}:\ multi\_train\_x,\ \textcolor{stringliteral}{"{}trainY"{}}:\ multi\_train\_y,}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00155}00155\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}testX"{}}:\ multi\_test\_x,\ \textcolor{stringliteral}{"{}testY"{}}:\ multi\_test\_y,\ \textcolor{stringliteral}{"{}vdd"{}}:\ mvdd,\ \textcolor{stringliteral}{"{}cnms"{}}:\ cols,}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00156}00156\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}idtest"{}}:\ xdx[pmod:]\}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00157}00157\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00158}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae34d126cbc15a9f5e6c7f4d4ef8dd7a3}{00158}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae34d126cbc15a9f5e6c7f4d4ef8dd7a3}{prepare\_multivariate\_data}}(self,\ df\_x:\ pd.DataFrame,\ win:\ int,\ n\_ftrs:\ int,\ idx:\ pd.Index)\ -\/>\ tuple:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00159}00159\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00160}00160\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Prepares\ the\ multivariate\ data\ for\ modeling.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00161}00161\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00162}00162\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00163}00163\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00164}00164\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ df\_x\ :\ pd.DataFrame}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00165}00165\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ features.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00166}00166\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ win\ :\ int}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00167}00167\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ window\ size.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00168}00168\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ n\_ftrs\ :\ int}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00169}00169\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ number\ of\ features.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00170}00170\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ idx\ :\ pd.Index}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00171}00171\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ index.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00172}00172\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00173}00173\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00174}00174\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ -\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00175}00175\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Tuple[np.ndarray,\ pd.Index]}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00176}00176\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ The\ multivariate\ data\ and\ columns.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00177}00177\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00178}00178\ \ \ \ \ \ \ \ \ multi\_x\ =\ []}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00179}00179\ \ \ \ \ \ \ \ \ cols\ =\ df\_x.columns}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00180}00180\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ i\ \textcolor{keywordflow}{in}\ range(len(df\_x.columns)):}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00181}00181\ \ \ \ \ \ \ \ \ \ \ \ \ lX\ =\ np.lib.stride\_tricks.sliding\_window\_view(df\_x.iloc[:,\ i].to\_numpy(),\ window\_shape=win)[::n\_ftrs]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00182}00182\ \ \ \ \ \ \ \ \ \ \ \ \ ss\ =\ pd.DataFrame.from\_records(lX)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00183}00183\ \ \ \ \ \ \ \ \ \ \ \ \ ss.set\_index(idx,\ drop=\textcolor{keyword}{True},\ inplace=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00184}00184\ \ \ \ \ \ \ \ \ \ \ \ \ multi\_x.append(ss.to\_numpy())}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00185}00185\ \ \ \ \ \ \ \ \ multi\_x\ =\ np.transpose(np.stack(multi\_x,\ axis=1),\ (0,\ 2,\ 1))}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00186}00186\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ multi\_x,\ cols}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00187}00187\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00188}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a42de0fbde1f905f6eb8798bf1ca9ac6f}{00188}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a42de0fbde1f905f6eb8798bf1ca9ac6f}{compute\_sentiment\_scores}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00189}00189\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00190}00190\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Computes\ the\ sentiment\ scores\ for\ the\ data.}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00191}00191\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00192}00192\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'TWEET\_POSTIVIE'}]\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'TWITTER\_POS\_SENTIMENT\_COUNT'}]\ /\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'TWITTER\_PUBLICATION\_COUNT'}].replace(0,\ 1)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00193}00193\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'TWEET\_NEGATIVE'}]\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'TWITTER\_NEG\_SENTIMENT\_COUNT'}]\ /\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'TWITTER\_PUBLICATION\_COUNT'}].replace(0,\ 1)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00194}00194\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'NEWS\_POSITIVE'}]\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'NEWS\_POS\_SENTIMENT\_COUNT'}]\ /\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'NEWS\_PUBLICATION\_COUNT'}].replace(0,\ 1)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00195}00195\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'NEWS\_NEGATIVE'}]\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'NEWS\_NEG\_SENTIMENT\_COUNT'}]\ /\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'NEWS\_PUBLICATION\_COUNT'}].replace(0,\ 1)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00196}00196\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00197}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a5b3eede0bd65d819f46a16b2690d2157}{00197}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a5b3eede0bd65d819f46a16b2690d2157}{compute\_volatility}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00198}00198\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00199}00199\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Computes\ the\ daily\ volatility\ for\ each\ row\ in\ the\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00200}00200\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ '''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00201}00201\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'VOLATILITY'}]\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'PX\_LAST'}].pct\_change().rolling(window=252).std()}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00202}00202\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00203}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae5c937e5597d171f8e5ab371ed078081}{00203}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae5c937e5597d171f8e5ab371ed078081}{compute\_trend}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00204}00204\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00205}00205\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Computes\ the\ trend\ for\ the\ price\ and\ volume\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00206}00206\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ '''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00207}00207\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'PX\_TREND'}]\ =\ 2\ *\ (self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'PX\_LAST'}]\ -\/\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'PX\_OPEN'}])\ /\ (self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'PX\_OPEN'}]\ +\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'PX\_LAST'}])}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00208}00208\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'PX\_VTREND'}]\ =\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'PX\_TREND'}]\ *\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}[\textcolor{stringliteral}{'VOLUME'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00209}00209\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00210}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_afaadb71ab1b0a8dc3f092e3725fe5653}{00210}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_afaadb71ab1b0a8dc3f092e3725fe5653}{check\_nan\_values}}(self,\ train\_x:\ pd.DataFrame,\ test\_x:\ pd.DataFrame,\ ahead:\ int)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00211}00211\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00212}00212\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Checks\ for\ NaN\ values\ in\ the\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00213}00213\ \textcolor{stringliteral}{\ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00214}00214\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00215}00215\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ train\_x\ :\ DataFrame}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00216}00216\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ the\ training\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00217}00217\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ test\_x\ :\ DataFrame}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00218}00218\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ the\ testing\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00219}00219\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ ahead\ :\ int}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00220}00220\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ the\ number\ of\ days\ ahead}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00221}00221\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00222}00222\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00223}00223\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Error\ message\ if\ NaN\ values\ are\ found'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00224}00224\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ np.isinf(train\_x).any()\ \textcolor{keywordflow}{or}\ np.isnan(train\_x).any():}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00225}00225\ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Stock\ \{self.ticker\}\ ahead:\ \{ahead\}\ has\ nans."{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00226}00226\ \ \ \ \ \ \ \ \ \ \ \ \ print(train\_x)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00227}00227\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00228}00228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ np.isnan(test\_x).any():}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00229}00229\ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Stock\ \{self.ticker\}\ ahead:\ \{ahead\}\ has\ nans."{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00230}00230\ \ \ \ \ \ \ \ \ \ \ \ \ print(test\_x)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00231}00231\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00232}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_aca93b9261771a54298d5fbe82434e621}{00232}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_aca93b9261771a54298d5fbe82434e621}{check\_infinite\_values}}(self,\ df:\ pd.DataFrame)\ -\/>\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00233}00233\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00234}00234\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Checks\ for\ infinite\ values\ in\ the\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00235}00235\ \textcolor{stringliteral}{\ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00236}00236\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00237}00237\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ df\ :\ the\ DataFrame}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00238}00238\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00239}00239\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00240}00240\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Error\ message\ if\ infinite\ values\ are\ found'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00241}00241\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ np.isinf(df).values.sum()\ >\ 0:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00242}00242\ \ \ \ \ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Error:\ Infinite\ values\ were\ found\ in\ the\ DataFrame."{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00243}00243\ \ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00244}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a193b5b7257b2826ee06e1d39b961a995}{00244}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a193b5b7257b2826ee06e1d39b961a995}{prepare\_data\_for\_modeling}}(self,\ x\_norm,\ y\_norm,\ multi:\ bool)\ -\/>\ tuple:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00245}00245\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00246}00246\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns\ the\ data\ for\ modeling}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00247}00247\ \textcolor{stringliteral}{\ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00248}00248\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00249}00249\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ x\_norm\ :\ the\ features}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00250}00250\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ y\_norm\ :\ the\ target}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00251}00251\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ multi\ :\ if\ the\ data\ is\ multivariate}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00252}00252\ \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00253}00253\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00254}00254\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Train\_x\ :\ data\ for\ training}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00255}00255\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Train\_y\ :\ target\ for\ training}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00256}00256\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Test\_x\ :\ data\ for\ testing}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00257}00257\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Test\_y\ :\ target\ for\ testing}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00258}00258\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ '''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00259}00259\ \ \ \ \ \ \ \ \ pmod\ =\ int(x\_norm.shape[0]\ *\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_af2820257a0a2cf7eb135582b447c9d27}{tr\_tst}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00260}00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ multi\ \textcolor{keywordflow}{is}\ \textcolor{keyword}{False}:\ \ \textcolor{comment}{\#\ Univariate}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00261}00261\ \ \ \ \ \ \ \ \ \ \ \ \ train\_x\ =\ x\_norm.iloc[:pmod,:]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00262}00262\ \ \ \ \ \ \ \ \ \ \ \ \ train\_y\ =\ y\_norm.iloc[:pmod]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00263}00263\ \ \ \ \ \ \ \ \ \ \ \ \ test\_x\ \ =\ x\_norm.iloc[pmod:,:]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00264}00264\ \ \ \ \ \ \ \ \ \ \ \ \ test\_y\ \ =\ y\_norm.iloc[pmod:]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00265}00265\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:\ \ \textcolor{comment}{\#\ Multivariate}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00266}00266\ \ \ \ \ \ \ \ \ \ \ \ \ train\_x\ =\ x\_norm[:pmod,\ :,\ :]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00267}00267\ \ \ \ \ \ \ \ \ \ \ \ \ train\_y\ =\ y\_norm[:pmod]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00268}00268\ \ \ \ \ \ \ \ \ \ \ \ \ test\_x\ =\ x\_norm[pmod:,\ :,\ :]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00269}00269\ \ \ \ \ \ \ \ \ \ \ \ \ test\_y\ =\ y\_norm[pmod:]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00270}00270\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ train\_x,\ train\_y,\ test\_x,\ test\_y,\ pmod}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00271}00271\ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00272}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ac8adb4c89e3fcada31f5ae481efd16b6}{00272}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ac8adb4c89e3fcada31f5ae481efd16b6}{process\_stocks}}(self)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00273}00273\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00274}00274\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Processes\ the\ stock\ data'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00275}00275\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a42de0fbde1f905f6eb8798bf1ca9ac6f}{compute\_sentiment\_scores}}()}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00276}00276\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a5b3eede0bd65d819f46a16b2690d2157}{compute\_volatility}}()}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00277}00277\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ae5c937e5597d171f8e5ab371ed078081}{compute\_trend}}()}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00278}00278\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0255eb2dd671526a2694067535df2720}{df}}.dropna(inplace=\textcolor{keyword}{True})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00279}00279\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00280}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0d114f6856b9ebafab0609a38c12fd78}{00280}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_a0d114f6856b9ebafab0609a38c12fd78}{calculate\_mean}}(self,\ data,\ axis=None)\ -\/>\ np.ndarray:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00281}00281\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00282}00282\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns\ the\ mean\ of\ the\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00283}00283\ \textcolor{stringliteral}{\ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00284}00284\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00285}00285\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ data\ :\ the\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00286}00286\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ axis\ :\ the\ axis}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00287}00287\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00288}00288\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00289}00289\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ The\ mean\ of\ the\ data'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00290}00290\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ np.mean(data,\ axis=axis)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00291}00291\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00292}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ab731a2338fa9f2499d25d17259f77cea}{00292}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ab731a2338fa9f2499d25d17259f77cea}{calculate\_min}}(self,\ data,\ axis=1)\ -\/>\ np.ndarray:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00293}00293\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00294}00294\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns\ the\ minimum\ of\ the\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00295}00295\ \textcolor{stringliteral}{\ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00296}00296\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00297}00297\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ data\ :\ the\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00298}00298\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ axis\ :\ the\ axis}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00299}00299\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00300}00300\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00301}00301\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ The\ minimum\ of\ the\ data'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00302}00302\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data.min(axis=axis)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00303}00303\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00304}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ad08c5cea0cbe7dda017033cd2309af3b}{00304}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock_ad08c5cea0cbe7dda017033cd2309af3b}{calculate\_max}}(self,\ data,\ axis=1)\ -\/>\ np.ndarray:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00305}00305\ \ \ \ \ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00306}00306\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns\ the\ maximum\ of\ the\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00307}00307\ \textcolor{stringliteral}{\ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00308}00308\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Parameters:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00309}00309\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ data\ :\ the\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00310}00310\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ axis\ :\ the\ axis}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00311}00311\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00312}00312\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ Returns:}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00313}00313\ \textcolor{stringliteral}{\ \ \ \ \ \ \ \ The\ maximum\ of\ the\ data'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00314}00314\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ data.max(axis=axis)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00315}00315\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00316}00316\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00317}00317\ \textcolor{comment}{\#\ from\ https://stackoverflow.com/questions/6076690/verbose-\/level-\/with-\/argparse-\/and-\/multiple-\/v-\/options}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00318}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action}{00318}}\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action}{VAction}}(argparse.Action):}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00319}00319\ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00320}00320\ \textcolor{stringliteral}{\ \ \ \ Custom\ action\ class\ to\ handle\ the\ verbose\ option}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00321}00321\ \textcolor{stringliteral}{\ \ \ \ '''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00322}00322\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00323}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_af9bfea99aeb7085d334f7221a4ff94e1}{00323}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_af9bfea99aeb7085d334f7221a4ff94e1}{\_\_init\_\_}}(self,\ option\_strings,\ dest,\ nargs=None,\ const=None,}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00324}00324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ default=None,\ type=None,\ choices=None,\ required=False,}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00325}00325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ help=None,\ metavar=None):}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00326}00326\ \ \ \ \ \ \ \ \ super(VAction,\ self).\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_af9bfea99aeb7085d334f7221a4ff94e1}{\_\_init\_\_}}(option\_strings,\ dest,\ nargs,\ const,}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00327}00327\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ default,\ type,\ choices,\ required,}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00328}00328\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ help,\ metavar)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00329}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_a926bbc546da14e975dc06e8acbf6bc7a}{00329}}\ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_a926bbc546da14e975dc06e8acbf6bc7a}{values}}\ =\ 0}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00330}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_a5136291e4301429ed685acb71a6c4228}{00330}}\ \ \ \ \ \textcolor{keyword}{def\ }\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_a5136291e4301429ed685acb71a6c4228}{\_\_call\_\_}}(self,\ parser,\ args,\ values,\ option\_string=None):}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00331}00331\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ print('values:\ \{v!r\}'.format(v=values))}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00332}00332\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ values\ \textcolor{keywordflow}{is}\ \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00333}00333\ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_a926bbc546da14e975dc06e8acbf6bc7a}{values}}\ +=\ 1}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00334}00334\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00335}00335\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00336}00336\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_a926bbc546da14e975dc06e8acbf6bc7a}{values}}\ =\ int(values)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00337}00337\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{except}\ ValueError:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00338}00338\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_a926bbc546da14e975dc06e8acbf6bc7a}{values}}\ =\ values.count(\textcolor{stringliteral}{'v'})+1}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00339}\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_aaf90c2f6cecb93612310893e24c79d69}{00339}}\ \ \ \ \ \ \ \ \ setattr(args,\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_aaf90c2f6cecb93612310893e24c79d69}{dest}},\ self.\mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_v_action_a926bbc546da14e975dc06e8acbf6bc7a}{values}})\ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00340}00340\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00341}00341\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00342}\mbox{\hyperlink{namespacesrc_1_1_data_preprocessing_a4c03de0a42f6baf27f59d5b2dad6ba64}{00342}}\ \textcolor{keyword}{def\ }main(args)\ -\/>\ None:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00343}00343\ \ \ \ \ \textcolor{stringliteral}{'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00344}00344\ \textcolor{stringliteral}{\ \ \ \ Main\ function\ that\ processes\ the\ data\ and\ creates\ the\ output\ files\ for\ each\ stock'''}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00345}00345\ \ \ \ \ config,\ \_\ =\ get\_configuration(args.params\_file)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00346}00346\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00347}00347\ \ \ \ \ \textcolor{keywordflow}{if}\ args.verbose\ >\ 0:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00348}00348\ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Additional\ Info:"{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00349}00349\ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Add\ additional\ information\ here}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00350}00350\ \ \ \ \ \ \ \ \ print(\textcolor{stringliteral}{"{}Processing\ data\ with\ the\ configuration\ file:"{}},\ args.params\_file)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00351}00351\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00352}00352\ \ \ \ \ data\_path\ =\ config[\textcolor{stringliteral}{'data'}][\textcolor{stringliteral}{'data\_path'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00353}00353\ \ \ \ \ out\_path\ =\ config[\textcolor{stringliteral}{'data'}][\textcolor{stringliteral}{'output\_path'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00354}00354\ \ \ \ \ filename\_structure\ =\ config[\textcolor{stringliteral}{'data'}][\textcolor{stringliteral}{'filename\_structure'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00355}00355\ \ \ \ \ date\ =\ config[\textcolor{stringliteral}{'data'}][\textcolor{stringliteral}{'date'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00356}00356\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00357}00357\ \ \ \ \ \textcolor{keywordflow}{for}\ scenario\ \textcolor{keywordflow}{in}\ config[\textcolor{stringliteral}{'scenarios'}]:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00358}00358\ \ \ \ \ \ \ \ \ list\_win\_size\ =\ scenario[\textcolor{stringliteral}{'win'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00359}00359\ \ \ \ \ \ \ \ \ lahead\ =\ scenario[\textcolor{stringliteral}{'lahead'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00360}00360\ \ \ \ \ \ \ \ \ stock\_list\ =\ scenario[\textcolor{stringliteral}{'tickers'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00361}00361\ \ \ \ \ \ \ \ \ n\_ftrs\ =\ scenario[\textcolor{stringliteral}{'n\_features'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00362}00362\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ win\ \textcolor{keywordflow}{in}\ list\_win\_size:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00363}00363\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ ticker\ \textcolor{keywordflow}{in}\ stock\_list:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00364}00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename\ =\ filename\_structure.format(ticker=ticker,\ date=date)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00365}00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file\ =\ os.path.join(data\_path,\ filename)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00366}00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{assert}\ os.path.exists(file),\ f\textcolor{stringliteral}{"{}El\ archivo\ \{file\}\ no\ existe."{}}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00367}00367\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00368}00368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ tr\_tst\ \textcolor{keywordflow}{in}\ scenario[\textcolor{stringliteral}{'tr\_tst'}]:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00369}00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ scen\_name\ =\ scenario[\textcolor{stringliteral}{'name'}]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00370}00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stock\ =\ \mbox{\hyperlink{classsrc_1_1_data_preprocessing_1_1_stock}{Stock}}(ticker,\ file,\ lahead,\ tr\_tst,\ scen\_name)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00371}00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stock.process\_stocks()}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00372}00372\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00373}00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ lpar\ =\ [win,\ n\_ftrs,\ tr\_tst]}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00374}00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Univariate\ data\ processing}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00375}00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stock.process\_univariate\_data(win)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00376}00376\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fdat1\ =\ out\_path\ +\ \textcolor{stringliteral}{"{}/input/\{\}/\{\}/\{\}-\/\{\}-\/input.pkl"{}}.format(win,stock.tr\_tst,stock.scen\_name,ticker)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00377}00377\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00378}00378\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Multivariate\ data\ processing}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00379}00379\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stock.process\_multivariate\_data(win,\ n\_ftrs)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00380}00380\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fdat2\ =\ out\_path\ +\ \textcolor{stringliteral}{"{}/input/\{\}/\{\}/\{\}-\/\{\}-\/m-\/input.pkl"{}}.format(win,stock.tr\_tst,stock.scen\_name,ticker)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00381}00381\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00382}00382\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Save\ univariate\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00383}00383\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.exists(fdat1):}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00384}00384\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ directory1\ =\ os.path.dirname(fdat1)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00385}00385\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.exists(directory1):}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00386}00386\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ os.makedirs(directory1)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00387}00387\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Directory\ \{directory1\}\ created."{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00388}00388\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00389}00389\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ save\_data(fdat1,\ out\_path,\ lahead,\ lpar,\ stock.serial\_dict)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00390}00390\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}File\ \{fdat1\}\ data\ saved."{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00391}00391\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00392}00392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{\#\ Save\ multivariate\ data}}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00393}00393\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.exists(fdat2):}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00394}00394\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ directory1\ =\ os.path.dirname(fdat2)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00395}00395\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ \textcolor{keywordflow}{not}\ os.path.exists(directory1):}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00396}00396\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ os.makedirs(directory1)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00397}00397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}Directory\ \{directory1\}\ created."{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00398}00398\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00399}00399\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ save\_data(fdat2,\ out\_path,\ lahead,\ lpar,\ stock.mserial\_dict)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00400}00400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ print(f\textcolor{stringliteral}{"{}File\ \{fdat2\}\ data\ saved."{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00401}00401\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00402}00402\ }
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00403}00403\ \textcolor{keywordflow}{if}\ \_\_name\_\_\ ==\ \textcolor{stringliteral}{"{}\_\_main\_\_"{}}:}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00404}\mbox{\hyperlink{namespacesrc_1_1_data_preprocessing_a1f971d0a1330ae2a00d94c31d8a7408f}{00404}}\ \ \ \ \ parser\ =\ argparse.ArgumentParser(description=\textcolor{stringliteral}{"{}Process\ data\ and\ create\ output."{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00405}\mbox{\hyperlink{namespacesrc_1_1_data_preprocessing_aac57dddbab4080b2b0626ca7a6953109}{00405}}\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{"{}-\/v"{}},\ \textcolor{stringliteral}{"{}-\/-\/verbose"{}},\ nargs=\textcolor{stringliteral}{'?'},\ action=VAction,\(\backslash\)}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00406}\mbox{\hyperlink{namespacesrc_1_1_data_preprocessing_a9c0ce4d175a72d578618bcbeee9c6db3}{00406}}\ \ \ \ \ \ \ \ \ \ \ \ \ dest=\textcolor{stringliteral}{'verbose'},\ help=\textcolor{stringliteral}{"{}Option\ for\ detailed\ information"{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00407}00407\ \ \ \ \ parser.add\_argument(\textcolor{stringliteral}{"{}-\/c"{}},\ \textcolor{stringliteral}{"{}-\/-\/params\_file"{}},\ nargs=\textcolor{stringliteral}{'?'},\ action=\textcolor{stringliteral}{'store'},\ help=\textcolor{stringliteral}{"{}Configuration\ file\ path"{}})}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00408}\mbox{\hyperlink{namespacesrc_1_1_data_preprocessing_a79de4de225902823dfca5f7950660931}{00408}}\ \ \ \ \ args\ =\ parser.parse\_args()}
\DoxyCodeLine{\Hypertarget{_data_preprocessing_8py_source_l00409}00409\ \ \ \ \ main(args)}

\end{DoxyCode}
